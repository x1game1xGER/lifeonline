var JSON;
JSON || (JSON = {});
(function() {
    function a(a) {
        return 10 > a ? "0" + a : a
    }

    function b(a) {
        d.lastIndex = 0;
        return d.test(a) ? '"' + a.replace(d, function(a) {
            var b = l[a];
            return "string" === typeof b ? b : "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4)
        }) + '"' : '"' + a + '"'
    }

    function c(a, f) {
        var d, n, m, r, e = g,
            q, h = f[a];
        h && "object" === typeof h && "function" === typeof h.toJSON && (h = h.toJSON(a));
        "function" === typeof p && (h = p.call(f, a, h));
        switch (typeof h) {
            case "string":
                return b(h);
            case "number":
                return isFinite(h) ? String(h) : "null";
            case "boolean":
            case "null":
                return String(h);
            case "object":
                if (!h) return "null";
                g += k;
                q = [];
                if ("[object Array]" === Object.prototype.toString.apply(h)) {
                    r = h.length;
                    for (d = 0; d < r; d += 1) q[d] = c(d, h) || "null";
                    m = 0 === q.length ? "[]" : g ? "[\n" + g + q.join(",\n" + g) + "\n" + e + "]" : "[" + q.join(",") + "]";
                    g = e;
                    return m
                }
                if (p && "object" === typeof p)
                    for (r = p.length, d = 0; d < r; d += 1) "string" === typeof p[d] && (n = p[d], (m = c(n, h)) && q.push(b(n) + (g ? ": " : ":") + m));
                else
                    for (n in h) Object.prototype.hasOwnProperty.call(h, n) && (m = c(n, h)) && q.push(b(n) + (g ? ": " : ":") + m);
                m = 0 === q.length ? "{}" : g ? "{\n" + g + q.join(",\n" + g) + "\n" + e + "}" : "{" + q.join(",") +
                    "}";
                g = e;
                return m
        }
    }
    "function" !== typeof Date.prototype.toJSON && (Date.prototype.toJSON = function(b) {
        return isFinite(this.valueOf()) ? this.getUTCFullYear() + "-" + a(this.getUTCMonth() + 1) + "-" + a(this.getUTCDate()) + "T" + a(this.getUTCHours()) + ":" + a(this.getUTCMinutes()) + ":" + a(this.getUTCSeconds()) + "Z" : null
    }, String.prototype.toJSON = Number.prototype.toJSON = Boolean.prototype.toJSON = function(a) {
        return this.valueOf()
    });
    var f = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
        d = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
        g, k, l = {
            "\b": "\\b",
            "\t": "\\t",
            "\n": "\\n",
            "\f": "\\f",
            "\r": "\\r",
            '"': '\\"',
            "\\": "\\\\"
        },
        p;
    "function" !== typeof JSON.stringify && (JSON.stringify = function(a, b, f) {
        var d;
        k = g = "";
        if ("number" === typeof f)
            for (d = 0; d < f; d += 1) k += " ";
        else "string" === typeof f && (k = f);
        if ((p = b) && "function" !== typeof b && ("object" !== typeof b || "number" !== typeof b.length)) throw Error("JSON.stringify");
        return c("", {
            "": a
        })
    });
    "function" !== typeof JSON.parse && (JSON.parse = function(a, b) {
        function c(a, d) {
            var f, g, h = a[d];
            if (h && "object" === typeof h)
                for (f in h) Object.prototype.hasOwnProperty.call(h, f) && (g = c(h, f), void 0 !== g ? h[f] = g : delete h[f]);
            return b.call(a, d, h)
        }
        var d;
        a = String(a);
        f.lastIndex = 0;
        f.test(a) && (a = a.replace(f, function(a) {
            return "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4)
        }));
        if (/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
                "]").replace(/(?:^|:|,)(?:\s*\[)+/g, ""))) return d = eval("(" + a + ")"), "function" === typeof b ? c({
            "": d
        }, "") : d;
        throw new SyntaxError("JSON.parse");
    })
})();
(function(a, b, c) {
    function f(a) {
        a = a || location.href;
        return "#" + a.replace(/^[^#]*#?(.*)$/, "$1")
    }
    var d = document,
        g, k = a.event.special,
        l = d.documentMode,
        p = "onhashchange" in b && (l === c || 7 < l);
    a.fn.hashchange = function(a) {
        return a ? this.bind("hashchange", a) : this.trigger("hashchange")
    };
    a.fn.hashchange.delay = 50;
    k.hashchange = a.extend(k.hashchange, {
        setup: function() {
            if (p) return !1;
            a(g.start)
        },
        teardown: function() {
            if (p) return !1;
            a(g.stop)
        }
    });
    g = function() {
        function g() {
            var c = f(),
                d = e(n);
            c !== n ? (r(n = c, d), a(b).trigger("hashchange")) :
                d !== n && (location.href = location.href.replace(/#.*/, "") + d);
            l = setTimeout(g, a.fn.hashchange.delay)
        }
        var k = {},
            l, n = f(),
            m = function(a) {
                return a
            },
            r = m,
            e = m;
        k.start = function() {
            l || g()
        };
        k.stop = function() {
            l && clearTimeout(l);
            l = c
        };
        a.browser.msie && !p && function() {
            var b, c;
            k.start = function() {
                b || (c = (c = a.fn.hashchange.src) && c + f(), b = a('<iframe tabindex="-1" title="empty"/>').hide().one("load", function() {
                    c || r(f());
                    g()
                }).attr("src", c || "javascript:0").insertAfter("body")[0].contentWindow, d.onpropertychange = function() {
                    try {
                        "title" ===
                        event.propertyName && (b.document.title = d.title)
                    } catch (a) {}
                })
            };
            k.stop = m;
            e = function() {
                return f(b.location.href)
            };
            r = function(c, f) {
                var e = b.document,
                    g = a.fn.hashchange.domain;
                c !== f && (e.title = d.title, e.open(), g && e.write('<script>document.domain="' + g + '"\x3c/script>'), e.close(), b.location.hash = c)
            }
        }();
        return k
    }()
})(jQuery, this);
(function(a) {
    function b() {
        url = location.href;
        return hashtag = -1 !== url.indexOf("#prettyPhoto") ? decodeURI(url.substring(url.indexOf("#prettyPhoto") + 1, url.length)) : !1
    }

    function c(a, b) {
        a = a.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
        var c = (new RegExp("[\\?&]" + a + "=([^&#]*)")).exec(b);
        return null == c ? "" : c[1]
    }
    a.prettyPhoto = {
        version: "3.1.4"
    };
    a.fn.prettyPhoto = function(f) {
        function d() {
            a(".pp_loaderIcon").hide();
            projectedTop = scroll_pos.scrollTop + (u / 2 - e.containerHeight / 2);
            0 > projectedTop && (projectedTop = 0);
            $ppt.fadeTo(settings.animation_speed,
                1);
            $pp_pic_holder.find(".pp_content").animate({
                height: e.contentHeight,
                width: e.contentWidth
            }, settings.animation_speed);
            $pp_pic_holder.animate({
                top: projectedTop,
                left: 0 > t / 2 - e.containerWidth / 2 ? 0 : t / 2 - e.containerWidth / 2,
                width: e.containerWidth
            }, settings.animation_speed, function() {
                $pp_pic_holder.find(".pp_hoverContainer,#fullResImage").height(e.height).width(e.width);
                $pp_pic_holder.find(".pp_fade").fadeIn(settings.animation_speed);
                isSet && "image" == y(pp_images[set_position]) ? $pp_pic_holder.find(".pp_hoverContainer").show() :
                    $pp_pic_holder.find(".pp_hoverContainer").hide();
                settings.allow_expand && (e.resized ? a("a.pp_expand,a.pp_contract").show() : a("a.pp_expand").hide());
                !settings.autoplay_slideshow || x || q || a.prettyPhoto.startSlideshow();
                settings.changepicturecallback();
                q = !0
            });
            isSet && settings.overlay_gallery && "image" == y(pp_images[set_position]) && settings.ie6_fallback && (!a.browser.msie || 6 != parseInt(a.browser.version)) ? (itemWidth = 57, navWidth = "facebook" == settings.theme || "pp_default" == settings.theme ? 50 : 30, itemsPerPage = Math.floor((e.containerWidth -
                    100 - navWidth) / itemWidth), itemsPerPage = itemsPerPage < pp_images.length ? itemsPerPage : pp_images.length, totalPage = Math.ceil(pp_images.length / itemsPerPage) - 1, 0 == totalPage ? (navWidth = 0, $pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").hide()) : $pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").show(), galleryWidth = itemsPerPage * itemWidth, fullGalleryWidth = pp_images.length * itemWidth, $pp_gallery.css("margin-left", -(galleryWidth / 2 + navWidth / 2)).find("div:first").width(galleryWidth + 5).find("ul").width(fullGalleryWidth).find("li.selected").removeClass("selected"),
                goToPage = Math.floor(set_position / itemsPerPage) < totalPage ? Math.floor(set_position / itemsPerPage) : totalPage, a.prettyPhoto.changeGalleryPage(goToPage), $pp_gallery_li.filter(":eq(" + set_position + ")").addClass("selected")) : $pp_pic_holder.find(".pp_content").unbind("mouseenter mouseleave");
            f.ajaxcallback()
        }

        function g(b) {
            $pp_pic_holder.find("#pp_full_res object,#pp_full_res embed").css("visibility", "hidden");
            $pp_pic_holder.find(".pp_fade").fadeOut(settings.animation_speed, function() {
                a(".pp_loaderIcon").show();
                b()
            })
        }

        function k(b) {
            1 < b ? a(".pp_nav").show() : a(".pp_nav").hide()
        }

        function l(a, b) {
            resized = !1;
            p(a, b);
            imageWidth = a;
            imageHeight = b;
            if ((w > t || v > u) && doresize && settings.allow_resize && !r) {
                resized = !0;
                for (fitting = !1; !fitting;) w > t ? (imageWidth = t - 200, imageHeight = b / a * imageWidth) : v > u ? (imageHeight = u - 200, imageWidth = a / b * imageHeight) : fitting = !0, v = imageHeight, w = imageWidth;
                p(imageWidth, imageHeight);
                (w > t || v > u) && l(w, v)
            }
            return {
                width: Math.floor(imageWidth),
                height: Math.floor(imageHeight),
                containerHeight: Math.floor(v),
                containerWidth: Math.floor(w) +
                    2 * settings.horizontal_padding,
                contentHeight: Math.floor(h),
                contentWidth: Math.floor(B),
                resized: resized
            }
        }

        function p(b, c) {
            b = parseFloat(b);
            c = parseFloat(c);
            $pp_details = $pp_pic_holder.find(".pp_details");
            $pp_details.width(b);
            detailsHeight = parseFloat($pp_details.css("marginTop")) + parseFloat($pp_details.css("marginBottom"));
            $pp_details = $pp_details.clone().addClass(settings.theme).width(b).appendTo(a("body")).css({
                position: "absolute",
                top: -1E4
            });
            detailsHeight += $pp_details.height();
            detailsHeight = 34 >= detailsHeight ?
                36 : detailsHeight;
            a.browser.msie && 7 == a.browser.version && (detailsHeight += 8);
            $pp_details.remove();
            $pp_title = $pp_pic_holder.find(".ppt");
            $pp_title.width(b);
            titleHeight = parseFloat($pp_title.css("marginTop")) + parseFloat($pp_title.css("marginBottom"));
            $pp_title = $pp_title.clone().appendTo(a("body")).css({
                position: "absolute",
                top: -1E4
            });
            titleHeight += $pp_title.height();
            $pp_title.remove();
            h = c + detailsHeight;
            B = b;
            v = h + titleHeight + $pp_pic_holder.find(".pp_top").height() + $pp_pic_holder.find(".pp_bottom").height();
            w = b
        }

        function y(a) {
            return a.match(/youtube\.com\/watch/i) || a.match(/youtu\.be/i) ? "youtube" : a.match(/vimeo\.com/i) ? "vimeo" : a.match(/\b.mov\b/i) ? "quicktime" : a.match(/\b.swf\b/i) ? "flash" : a.match(/\biframe=true\b/i) ? "iframe" : a.match(/\bajax=true\b/i) ? "ajax" : a.match(/\bcustom=true\b/i) ? "custom" : "#" == a.substr(0, 1) ? "inline" : "image"
        }

        function z() {
            doresize && "undefined" != typeof $pp_pic_holder && (scroll_pos = A(), contentHeight = $pp_pic_holder.height(), contentwidth = $pp_pic_holder.width(), projectedTop = u / 2 + scroll_pos.scrollTop -
                contentHeight / 2, 0 > projectedTop && (projectedTop = 0), contentHeight > u || $pp_pic_holder.css({
                    top: projectedTop,
                    left: t / 2 + scroll_pos.scrollLeft - contentwidth / 2
                }))
        }

        function A() {
            if (self.pageYOffset) return {
                scrollTop: self.pageYOffset,
                scrollLeft: self.pageXOffset
            };
            if (document.documentElement && document.documentElement.scrollTop) return {
                scrollTop: document.documentElement.scrollTop,
                scrollLeft: document.documentElement.scrollLeft
            };
            if (document.body) return {
                scrollTop: document.body.scrollTop,
                scrollLeft: document.body.scrollLeft
            }
        }

        function n(b) {
            settings.social_tools && (facebook_like_link = settings.social_tools.replace("{location_href}", encodeURIComponent(location.href)));
            settings.markup = settings.markup.replace("{pp_social}", "");
            a("body").append(settings.markup);
            $pp_pic_holder = a(".pp_pic_holder");
            $ppt = a(".ppt");
            $pp_overlay = a("div.pp_overlay");
            if (isSet && settings.overlay_gallery) {
                currentGalleryPage = 0;
                toInject = "";
                for (b = 0; b < pp_images.length; b++) pp_images[b].match(/\b(jpg|jpeg|png|gif)\b/gi) ? (classname = "", img_src = pp_images[b]) : (classname =
                    "default", img_src = ""), toInject += "<li class='" + classname + "'><a href='#'><img src='" + img_src + "' width='50' alt='' /></a></li>";
                toInject = settings.gallery_markup.replace(/{gallery}/g, toInject);
                $pp_pic_holder.find("#pp_full_res").after(toInject);
                $pp_gallery = a(".pp_pic_holder .pp_gallery");
                $pp_gallery_li = $pp_gallery.find("li");
                $pp_gallery.find(".pp_arrow_next").click(function() {
                    a.prettyPhoto.changeGalleryPage("next");
                    a.prettyPhoto.stopSlideshow();
                    return !1
                });
                $pp_gallery.find(".pp_arrow_previous").click(function() {
                    a.prettyPhoto.changeGalleryPage("previous");
                    a.prettyPhoto.stopSlideshow();
                    return !1
                });
                $pp_pic_holder.find(".pp_content").hover(function() {
                    $pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeIn()
                }, function() {
                    $pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeOut()
                });
                itemWidth = 57;
                $pp_gallery_li.each(function(b) {
                    a(this).find("a").click(function() {
                        a.prettyPhoto.changePage(b);
                        a.prettyPhoto.stopSlideshow();
                        return !1
                    })
                })
            }
            settings.slideshow && ($pp_pic_holder.find(".pp_nav").prepend('<a href="#" class="pp_play">Play</a>'), $pp_pic_holder.find(".pp_nav .pp_play").click(function() {
                a.prettyPhoto.startSlideshow();
                return !1
            }));
            $pp_pic_holder.attr("class", "pp_pic_holder " + settings.theme);
            $pp_overlay.css({
                opacity: 0,
                height: a(document).height(),
                width: a(window).width()
            }).bind("click", function() {
                settings.modal || a.prettyPhoto.close()
            });
            a("a.pp_close").bind("click", function() {
                a.prettyPhoto.close();
                return !1
            });
            settings.allow_expand && a("a.pp_expand").bind("click", function(b) {
                a(this).hasClass("pp_expand") ? (a(this).removeClass("pp_expand").addClass("pp_contract"), doresize = !1) : (a(this).removeClass("pp_contract").addClass("pp_expand"),
                    doresize = !0);
                g(function() {
                    a.prettyPhoto.open()
                });
                return !1
            });
            $pp_pic_holder.find(".pp_previous, .pp_nav .pp_arrow_previous").bind("click", function() {
                a.prettyPhoto.changePage("previous");
                a.prettyPhoto.stopSlideshow();
                return !1
            });
            $pp_pic_holder.find(".pp_next, .pp_nav .pp_arrow_next").bind("click", function() {
                a.prettyPhoto.changePage("next");
                a.prettyPhoto.stopSlideshow();
                return !1
            });
            z()
        }
        f = jQuery.extend({
                hook: "rel",
                animation_speed: "fast",
                ajaxcallback: function() {},
                slideshow: 5E3,
                autoplay_slideshow: !1,
                opacity: .8,
                show_title: !0,
                allow_resize: !0,
                allow_expand: !0,
                default_width: 500,
                default_height: 344,
                counter_separator_label: "/",
                theme: "pp_default",
                horizontal_padding: 20,
                hideflash: !1,
                wmode: "opaque",
                autoplay: !0,
                modal: !1,
                deeplinking: !0,
                overlay_gallery: !0,
                overlay_gallery_max: 30,
                keyboard_shortcuts: !0,
                changepicturecallback: function() {},
                callback: function() {},
                ie6_fallback: !0,
                markup: '<div class="pp_pic_holder"><div class="ppt">&nbsp;</div><div class="pp_top"><div class="pp_left"></div><div class="pp_middle"></div><div class="pp_right"></div></div><div class="pp_content_container"><div class="pp_right"><div class="pp_content"><div class="pp_loaderIcon"></div><div class="pp_fade"><div class="pp_hoverContainer"><a class="pp_next" href="#">next</a><a class="pp_previous" href="#">previous</a></div><div id="pp_full_res"></div><div class="pp_details"><div class="pp_nav"><a href="#" class="pp_arrow_previous">Previous</a><p class="currentTextHolder">0/0</p><a href="#" class="pp_arrow_next">Next</a></div><p class="pp_description"></p><div class="pp_social">{pp_social}</div><a class="pp_close" href="#">Close</a></div></div></div></div></div></div><div class="pp_bottom"><div class="pp_left"></div><div class="pp_middle"></div><div class="pp_right"></div></div></div><div class="pp_overlay"></div>',
                gallery_markup: '<div class="pp_gallery"><a href="#" class="pp_arrow_previous">Previous</a><div><ul>{gallery}</ul></div><a href="#" class="pp_arrow_next">Next</a></div>',
                image_markup: '<img id="fullResImage" src="{path}" />',
                flash_markup: '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',
                quicktime_markup: '<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',
                iframe_markup: '<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',
                inline_markup: '<div class="pp_inline">{content}</div>',
                custom_markup: "",
                social_tools: '<div class="twitter"><a href="http://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js">\x3c/script></div><div class="facebook"><iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href={location_href}&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:500px; height:23px;" allowTransparency="true"></iframe></div>'
            },
            f);
        var m = this,
            r = !1,
            e, q, h, B, v, w, u = a(window).height(),
            t = a(window).width(),
            x;
        doresize = !0;
        scroll_pos = A();
        a(window).unbind("resize.prettyphoto").bind("resize.prettyphoto", function() {
            z();
            u = a(window).height();
            t = a(window).width();
            "undefined" != typeof $pp_overlay && $pp_overlay.height(a(document).height()).width(t)
        });
        f.keyboard_shortcuts && a(document).unbind("keydown.prettyphoto").bind("keydown.prettyphoto", function(b) {
            if ("undefined" != typeof $pp_pic_holder && $pp_pic_holder.is(":visible")) switch (b.keyCode) {
                case 37:
                    a.prettyPhoto.changePage("previous");
                    b.preventDefault();
                    break;
                case 39:
                    a.prettyPhoto.changePage("next");
                    b.preventDefault();
                    break;
                case 27:
                    settings.modal || a.prettyPhoto.close(), b.preventDefault()
            }
        });
        a.prettyPhoto.initialize = function() {
            settings = f;
            "pp_default" == settings.theme && (settings.horizontal_padding = 16);
            settings.ie6_fallback && a.browser.msie && 6 == parseInt(a.browser.version) && (settings.theme = "light_square");
            theRel = a(this).attr(settings.hook);
            galleryRegExp = /\[(?:.*)\]/;
            pp_images = (isSet = galleryRegExp.exec(theRel) ? !0 : !1) ? jQuery.map(m, function(b,
                c) {
                if (-1 != a(b).attr(settings.hook).indexOf(theRel)) return a(b).attr("href")
            }) : a.makeArray(a(this).attr("href"));
            pp_titles = isSet ? jQuery.map(m, function(b, c) {
                if (-1 != a(b).attr(settings.hook).indexOf(theRel)) return a(b).find("img").attr("alt") ? a(b).find("img").attr("alt") : ""
            }) : a.makeArray(a(this).find("img").attr("alt"));
            pp_descriptions = isSet ? jQuery.map(m, function(b, c) {
                if (-1 != a(b).attr(settings.hook).indexOf(theRel)) return a(b).attr("title") ? a(b).attr("title") : ""
            }) : a.makeArray(a(this).attr("title"));
            pp_images.length >
                settings.overlay_gallery_max && (settings.overlay_gallery = !1);
            set_position = jQuery.inArray(a(this).attr("href"), pp_images);
            rel_index = isSet ? set_position : a("a[" + settings.hook + "^='" + theRel + "']").index(a(this));
            n(this);
            settings.allow_resize && a(window).bind("scroll.prettyphoto", function() {
                z()
            });
            a.prettyPhoto.open();
            return !1
        };
        a.prettyPhoto.open = function(b, g, h, m) {
            "undefined" == typeof settings && (settings = f, a.browser.msie && 6 == a.browser.version && (settings.theme = "light_square"), pp_images = a.makeArray(b), pp_titles =
                g ? a.makeArray(g) : a.makeArray(""), pp_descriptions = h ? a.makeArray(h) : a.makeArray(""), isSet = 1 < pp_images.length ? !0 : !1, set_position = m ? m : 0, n(b.target));
            a.browser.msie && 6 == a.browser.version && a("select").css("visibility", "hidden");
            settings.hideflash && a("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility", "hidden");
            k(a(pp_images).size());
            a(".pp_loaderIcon").show();
            settings.deeplinking && "undefined" != typeof theRel && (location.hash = theRel + "/" + rel_index + "/");
            settings.social_tools && (facebook_like_link =
                settings.social_tools.replace("{location_href}", encodeURIComponent(location.href)), $pp_pic_holder.find(".pp_social").html(facebook_like_link));
            $ppt.is(":hidden") && $ppt.css("opacity", 0).show();
            $pp_overlay.show().fadeTo(settings.animation_speed, settings.opacity);
            $pp_pic_holder.find(".currentTextHolder").text(set_position + 1 + settings.counter_separator_label + a(pp_images).size());
            "undefined" != typeof pp_descriptions[set_position] && "" != pp_descriptions[set_position] ? $pp_pic_holder.find(".pp_description").show().html(unescape(pp_descriptions[set_position])) :
                $pp_pic_holder.find(".pp_description").hide();
            movie_width = parseFloat(c("width", pp_images[set_position])) ? c("width", pp_images[set_position]) : settings.default_width.toString();
            movie_height = parseFloat(c("height", pp_images[set_position])) ? c("height", pp_images[set_position]) : settings.default_height.toString();
            r = !1; - 1 != movie_height.indexOf("%") && (movie_height = parseFloat(a(window).height() * parseFloat(movie_height) / 100 - 150), r = !0); - 1 != movie_width.indexOf("%") && (movie_width = parseFloat(a(window).width() * parseFloat(movie_width) /
                100 - 150), r = !0);
            $pp_pic_holder.fadeIn(function() {
                settings.show_title && "" != pp_titles[set_position] && "undefined" != typeof pp_titles[set_position] ? $ppt.html(unescape(pp_titles[set_position])) : $ppt.html("&nbsp;");
                imgPreloader = "";
                skipInjection = !1;
                switch (y(pp_images[set_position])) {
                    case "image":
                        imgPreloader = new Image;
                        nextImage = new Image;
                        isSet && set_position < a(pp_images).size() - 1 && (nextImage.src = pp_images[set_position + 1]);
                        prevImage = new Image;
                        isSet && pp_images[set_position - 1] && (prevImage.src = pp_images[set_position -
                            1]);
                        $pp_pic_holder.find("#pp_full_res")[0].innerHTML = settings.image_markup.replace(/{path}/g, pp_images[set_position]);
                        imgPreloader.onload = function() {
                            e = l(imgPreloader.width, imgPreloader.height);
                            d()
                        };
                        imgPreloader.onerror = function() {
                            alert("Image cannot be loaded. Make sure the path is correct and image exist.");
                            a.prettyPhoto.close()
                        };
                        imgPreloader.src = pp_images[set_position];
                        break;
                    case "youtube":
                        e = l(movie_width, movie_height);
                        movie_id = c("v", pp_images[set_position]);
                        "" == movie_id && (movie_id = pp_images[set_position].split("youtu.be/"),
                            movie_id = movie_id[1], 0 < movie_id.indexOf("?") && (movie_id = movie_id.substr(0, movie_id.indexOf("?"))), 0 < movie_id.indexOf("&") && (movie_id = movie_id.substr(0, movie_id.indexOf("&"))));
                        movie = "http://www.youtube.com/embed/" + movie_id;
                        c("rel", pp_images[set_position]) ? movie += "?rel=" + c("rel", pp_images[set_position]) : movie += "?rel=1";
                        settings.autoplay && (movie += "&autoplay=1");
                        toInject = settings.iframe_markup.replace(/{width}/g, e.width).replace(/{height}/g, e.height).replace(/{wmode}/g, settings.wmode).replace(/{path}/g,
                            movie);
                        break;
                    case "vimeo":
                        e = l(movie_width, movie_height);
                        movie_id = pp_images[set_position];
                        movie = "http://player.vimeo.com/video/" + movie_id.match(/http:\/\/(www\.)?vimeo.com\/(\d+)/)[2] + "?title=0&amp;byline=0&amp;portrait=0";
                        settings.autoplay && (movie += "&autoplay=1;");
                        vimeo_width = e.width + "/embed/?moog_width=" + e.width;
                        toInject = settings.iframe_markup.replace(/{width}/g, vimeo_width).replace(/{height}/g, e.height).replace(/{path}/g, movie);
                        break;
                    case "quicktime":
                        e = l(movie_width, movie_height);
                        e.height += 15;
                        e.contentHeight +=
                            15;
                        e.containerHeight += 15;
                        toInject = settings.quicktime_markup.replace(/{width}/g, e.width).replace(/{height}/g, e.height).replace(/{wmode}/g, settings.wmode).replace(/{path}/g, pp_images[set_position]).replace(/{autoplay}/g, settings.autoplay);
                        break;
                    case "flash":
                        e = l(movie_width, movie_height);
                        flash_vars = pp_images[set_position];
                        flash_vars = flash_vars.substring(pp_images[set_position].indexOf("flashvars") + 10, pp_images[set_position].length);
                        filename = pp_images[set_position];
                        filename = filename.substring(0, filename.indexOf("?"));
                        toInject = settings.flash_markup.replace(/{width}/g, e.width).replace(/{height}/g, e.height).replace(/{wmode}/g, settings.wmode).replace(/{path}/g, filename + "?" + flash_vars);
                        break;
                    case "iframe":
                        e = l(movie_width, movie_height);
                        frame_url = pp_images[set_position];
                        frame_url = frame_url.substr(0, frame_url.indexOf("iframe") - 1);
                        toInject = settings.iframe_markup.replace(/{width}/g, e.width).replace(/{height}/g, e.height).replace(/{path}/g, frame_url);
                        break;
                    case "ajax":
                        doresize = !1;
                        e = l(movie_width, movie_height);
                        skipInjection =
                            doresize = !0;
                        a.get(pp_images[set_position], function(a) {
                            toInject = settings.inline_markup.replace(/{content}/g, a);
                            $pp_pic_holder.find("#pp_full_res")[0].innerHTML = toInject;
                            d()
                        });
                        break;
                    case "custom":
                        e = l(movie_width, movie_height);
                        toInject = settings.custom_markup;
                        break;
                    case "inline":
                        myClone = a(pp_images[set_position]).clone().append('<br clear="all" />').css({
                            width: settings.default_width
                        }).wrapInner('<div id="pp_full_res"><div class="pp_inline"></div></div>').appendTo(a("body")).show(), doresize = !1, e = l(a(myClone).width(),
                            a(myClone).height()), doresize = !0, a(myClone).remove(), toInject = settings.inline_markup.replace(/{content}/g, a(pp_images[set_position]).html())
                }
                imgPreloader || skipInjection || ($pp_pic_holder.find("#pp_full_res")[0].innerHTML = toInject, d())
            });
            return !1
        };
        a.prettyPhoto.changePage = function(b) {
            currentGalleryPage = 0;
            "previous" == b ? (set_position--, 0 > set_position && (set_position = a(pp_images).size() - 1)) : "next" == b ? (set_position++, set_position > a(pp_images).size() - 1 && (set_position = 0)) : set_position = b;
            rel_index = set_position;
            doresize || (doresize = !0);
            settings.allow_expand && a(".pp_contract").removeClass("pp_contract").addClass("pp_expand");
            g(function() {
                a.prettyPhoto.open()
            })
        };
        a.prettyPhoto.changeGalleryPage = function(a) {
            "next" == a ? (currentGalleryPage++, currentGalleryPage > totalPage && (currentGalleryPage = 0)) : "previous" == a ? (currentGalleryPage--, 0 > currentGalleryPage && (currentGalleryPage = totalPage)) : currentGalleryPage = a;
            slide_speed = "next" == a || "previous" == a ? settings.animation_speed : 0;
            slide_to = currentGalleryPage * itemsPerPage * itemWidth;
            $pp_gallery.find("ul").animate({
                left: -slide_to
            }, slide_speed)
        };
        a.prettyPhoto.startSlideshow = function() {
            "undefined" == typeof x ? ($pp_pic_holder.find(".pp_play").unbind("click").removeClass("pp_play").addClass("pp_pause").click(function() {
                a.prettyPhoto.stopSlideshow();
                return !1
            }), x = setInterval(a.prettyPhoto.startSlideshow, settings.slideshow)) : a.prettyPhoto.changePage("next")
        };
        a.prettyPhoto.stopSlideshow = function() {
            $pp_pic_holder.find(".pp_pause").unbind("click").removeClass("pp_pause").addClass("pp_play").click(function() {
                a.prettyPhoto.startSlideshow();
                return !1
            });
            clearInterval(x);
            x = void 0
        };
        a.prettyPhoto.close = function() {
            $pp_overlay.is(":animated") || (a.prettyPhoto.stopSlideshow(), $pp_pic_holder.stop().find("object,embed").css("visibility", "hidden"), a("div.pp_pic_holder,div.ppt,.pp_fade").fadeOut(settings.animation_speed, function() {
                a(this).remove()
            }), $pp_overlay.fadeOut(settings.animation_speed, function() {
                a.browser.msie && 6 == a.browser.version && a("select").css("visibility", "visible");
                settings.hideflash && a("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility",
                    "visible");
                a(this).remove();
                a(window).unbind("scroll.prettyphoto"); - 1 !== location.href.indexOf("#prettyPhoto") && (location.hash = "prettyPhoto");
                settings.callback();
                doresize = !0;
                q = !1;
                delete settings
            }))
        };
        !pp_alreadyInitialized && b() && (pp_alreadyInitialized = !0, hashRel = hashIndex = b(), hashIndex = hashIndex.substring(hashIndex.indexOf("/") + 1, hashIndex.length - 1), hashRel = hashRel.substring(0, hashRel.indexOf("/")), setTimeout(function() {
            a("a[" + f.hook + "^='" + hashRel + "']:eq(" + hashIndex + ")").trigger("click")
        }, 50));
        return this.unbind("click.prettyphoto").bind("click.prettyphoto",
            a.prettyPhoto.initialize)
    }
})(jQuery);
var pp_alreadyInitialized = !1;
var urlize = function(a) {
    a = a.toLowerCase();
    a = a.replace(/\s\[.+\]/g, "");
    a = a.replace(/[^a-z0-9 ]/ig, "");
    return a = a.replace(/ +/g, "-")
};
$(document).ready(function() {
    $("a[data-ajax]").click(onAjaxLink);
    $("[data-click]").click(function(a) {
        var c = $(this).attr("data-click");
        window[c] && window[c].call(this, a)
    });
    $('a[rel^="lightbox"]').prettyPhoto({
        slideshow: !1,
        show_title: !1,
        deeplinking: !1,
        social_tools: ""
    });
    (function() {
        if ("/" == location.hash.charAt(1)) {
            var a = $("[href=" + location.hash.replace("/", "") + "]");
            a && a.tab("show")
        }
    })();
    $('a[data-toggle="tab"], a[data-toggle="pill"]').on("shown", function() {
        location.replace("#/" + $(this).attr("href").replace("#",
            ""))
    });
    var a = $(".toggleable");
    a.each(function() {
        var a = $(this),
            c = $("#" + a.attr("data-target"));
        a.hasClass("show") ? c.show() : c.hide()
    });
    a.click(function() {
        var a = $(this),
            c = $("#" + a.attr("data-target"));
        a.hasClass("show") ? c.hide() : c.show();
        a.toggleClass("show")
    })
});
var dayz_isMap = null,
    dayz_logo = null;
$(window).scroll(function() {
    null === dayz_isMap && (dayz_isMap = $("body").hasClass("map"));
    if (!dayz_isMap) {
        var a = $(window).scrollTop();
        null === dayz_logo && (dayz_logo = $("#logo")[0]);
        dayz_logo.style.top = -Math.min(25, a) + "px"
    }
});
var onAjaxLink = function(a) {
        a.preventDefault();
        var b = $(this);
        a = b.attr("data-callback");
        b = {
            type: "get",
            url: b.attr("href")
        };
        a && window[a] && (b.success = window[a]);
        $.ajax(b)
    },
    onRememberMe = function(a, b, c) {
        $("#rememberme").detach()
    },
    onGuideVote = function(a, b, c) {
        if (a.error) alert(a.error);
        else if (b = $("#guideVote")) $("span", b).text(a.newrating), 0 < a.rating ? ($(".icon-chevron-up", b).replaceWith('<var class="icon-chevron-up voted"></var>'), $(".icon-chevron-down", b).replaceWith('<a href="/rateguide?id=' + a.guide + '&rating=-1" class="icon-chevron-down" title="This guide is not helpful" data-ajax="1" data-callback="onGuideVote"></a>'),
            $(".icon-chevron-down", b).click(onAjaxLink)) : ($(".icon-chevron-up", b).replaceWith('<a href="/rateguide?id=' + a.guide + '&rating=1" class="icon-chevron-up" title="This guide is helpful" data-ajax="1" data-callback="onGuideVote"></a>'), $(".icon-chevron-down", b).replaceWith('<var class="icon-chevron-down voted"></var>'), $(".icon-chevron-up", b).click(onAjaxLink))
    },
    onCommentVote = function(a, b, c) {
        if (a.error) alert(a.error);
        else if (b = $("#c" + a.comment + " div.vote")) $("span", b).text(a.newrating), 0 < a.rating ? ($(".upvote",
            b).replaceWith('<var class="upvote voted">+</var>'), $(".downvote", b).replaceWith('<a href="/ratecomment?comment=' + a.comment + '&rating=-1" class="downvote" title="This comment is not helpful" data-ajax="1" data-callback="onCommentVote">-</a>'), $(".downvote", b).click(onAjaxLink)) : ($(".upvote", b).replaceWith('<a href="/ratecomment?comment=' + a.comment + '&rating=1" class="upvote" title="This comment is helpful" data-ajax="1" data-callback="onCommentVote">+</a>'), $(".downvote", b).replaceWith('<var class="downvote voted">-</var>'),
            $(".upvote", b).click(onAjaxLink))
    },
    onCommentDelete = function(a, b, c) {
        a.error ? alert(a.error) : $("#c" + a.comment).detach()
    };
Object.keys || (Object.keys = function() {
    var a = Object.prototype.hasOwnProperty,
        b = !{
            toString: null
        }.propertyIsEnumerable("toString"),
        c = "toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),
        f = c.length;
    return function(d) {
        if ("object" !== typeof d && "function" !== typeof d || null === d) throw new TypeError("Object.keys called on non-object");
        var g = [],
            k;
        for (k in d) a.call(d, k) && g.push(k);
        if (b)
            for (k = 0; k < f; k++) a.call(d, c[k]) && g.push(c[k]);
        return g
    }
}());
Datastore = new function() {
    var a = {
            write: function(a, b) {
                localStorage[a] = b
            },
            read: function(a) {
                return localStorage[a]
            }
        },
        b = {
            write: function(a, b) {
                var c = new Date;
                c.setTime(c + 5184E6);
                document.cookie = a + "=" + b + "; expires=" + c.toGMTString() + "; path=/"
            },
            read: function(a) {
                if ((a = (new RegExp(a + "=([^;]*)", "g")).exec(document.cookie)) && a[1]) return a[1]
            }
        },
        c;
    c = localStorage ? a : b;
    this.write = function(a, b) {
        c.write(a, b)
    };
    this.read = function(a) {
        return c.read(a)
    }
};
var Bank = new function() {
    var a = !1,
        b = [];
    this.load = function(a, f) {
        b.push({
            auid: a,
            slot_id: "slot" + a,
            tid: f
        });
        Bank.init()
    };
    this.init = function() {
        a || (a = !0, $.getScript("http://ox-d.zam.com/w/1.0/jstag"));
        if ("undefined" == typeof OX) setTimeout(Bank.init, 50);
        else {
            window.ox_instances || (window.ox_instances = {});
            for (var c, f = window.ox_instances; c = b.shift();) c = f[c.auid] = OX(c), c.addHook(Bank.onLoad, OX.Hooks.ON_ADUNIT_RENDER_FINISH), c.load()
        }
    };
    this.onLoad = function(a) {
        var b = window.ox_instances && window.ox_instances[a.get("adunit_id")] ||
            null,
            d = a.get("adv_id"),
            d = d.substr(d.indexOf(":") + 1);
        d in {
            118043: 1,
            119398: 1,
            123580: 1,
            136626: 1,
            136622: 1,
            136625: 1,
            136618: 1,
            136620: 1,
            136510: 1,
            136623: 1,
            136624: 1,
            136621: 1,
            136512: 1,
            136619: 1,
            136627: 1,
            136628: 1,
            537073066: 1,
            537073067: 1,
            537073068: 1,
            536881524: 1,
            537073422: 1,
            537073991: 1,
            537073992: 1,
            537073652: 1,
            537073641: 1,
            537074037: 1,
            537074039: 1,
            537074040: 1,
            537074041: 1,
            537074046: 1,
            537073817: 1,
            "": 1
        } || -1 < a.get("adv_id").indexOf("-") || b && b.setRefreshMax(0)
    }
};